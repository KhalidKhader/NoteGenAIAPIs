🏥 MEDICAL AI PROCESSING LOG - Encounter 1234sdfda56tfdxsz
================================================================================
Started at: 2025-06-20T23:32:47.002774Z
Output folder: generated_notes/1234sdfda56tfdxsz

[2025-06-20T23:32:47.003123] ✅ [INFO] 🚀 Starting processing pipeline for job job_1234sdfda56tfdxsz_b0afc524
   Details: {
  "trace_id": "N/A"
}
[2025-06-20T23:32:54.244321] ✅ [INFO] Storing and chunking conversation.
[2025-06-20T23:32:54.244764] ✅ [INFO] Storing conversation 1234sdfda56tfdxsz for doctor doc_123 in en.
   Details: {
  "turn_count": 13
}
[2025-06-20T23:32:54.245056] 🐞 [DEBUG] Grouped transcript into 10 speaker blocks.
[2025-06-20T23:32:54.245288] ✅ [INFO] Completed speaker-aware chunking. Total chunks: 2
[2025-06-20T23:32:56.218026] 🐞 [DEBUG] Stored chunk 1/2 with doc_id a4d5575a-8ac1-45b6-ac65-79a1c9933a5d
[2025-06-20T23:32:56.954313] 🐞 [DEBUG] Stored chunk 2/2 with doc_id 0bfa5475-b4ad-4786-999e-1e88400d68b3
[2025-06-20T23:32:57.699340] ✅ [INFO] Stored full conversation document.
[2025-06-20T23:32:57.701162] ✅ [INFO] Extracting all medical terms from full transcript for SNOMED mapping.
[2025-06-20T23:32:57.702897] 🔄 LLM_TERM_EXTRACTION_START
   📋 Starting medical term extraction from text (length: 2565)
   📊 Data: {
  "text_length": 2565,
  "language": "en"
}

[2025-06-20T23:32:59.092121] 🔄 LLM_TERM_EXTRACTION_COMPLETED
   📋 Extracted 26 medical terms using LLM.
   📊 Data: {
  "terms_extracted": 26,
  "sample_terms": [
    "chest pain",
    "dull ache",
    "shortness of breath",
    "dizziness",
    "palpitations",
    "swollen ankles",
    "hypertension",
    "Lisinopril",
    "high cholesterol",
    "smoker"
  ]
}

[2025-06-20T23:32:59.093879] 🔄 NEO4J_SNOMED_MAPPING_START
   📋 Starting SNOMED mapping for 26 medical terms
   📊 Data: {
  "medical_terms": [
    "chest pain",
    "dull ache",
    "shortness of breath",
    "dizziness",
    "palpitations",
    "swollen ankles",
    "hypertension",
    "Lisinopril",
    "high cholesterol",
    "smoker",
    "heart murmur",
    "blood pressure",
    "145/90 mmHg",
    "pitting edema",
    "cardiac issue",
    "coronary artery disease",
    "heart failure",
    "EKG",
    "blood work",
    "lipid panel",
    "BNP",
    "cardiologist",
    "stress test",
    "diuretic",
    "hydrochlorothiazide",
    "smoking cessation"
  ],
  "language": "en",
  "database": "NEO4J_SNOMED_CANADIAN_EDITION",
  "query_strategy": "EXACT_MATCH_THEN_CONTAINS_THEN_SEMANTIC"
}

[2025-06-20T23:32:59.094902] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'chest pain' (1/26)
   📊 Data: {
  "term": "chest pain",
  "term_index": 1,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:32:59.095646] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'chest pain' in Neo4j SNOMED
   📊 Data: {
  "term": "chest pain",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:32:59.634584] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'chest pain'
   📊 Data: {
  "term": "chest pain",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:32:59.635051] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'chest pain' → 'Chest pain' (SNOMED: 29857009)
   📊 Data: {
  "original_term": "chest pain",
  "snomed_concept_id": "29857009",
  "preferred_term": "Chest pain",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:32:59.635045"
}

[2025-06-20T23:32:59.635448] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'dull ache' (2/26)
   📊 Data: {
  "term": "dull ache",
  "term_index": 2,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:32:59.635666] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'dull ache' in Neo4j SNOMED
   📊 Data: {
  "term": "dull ache",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:01.531672] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'dull ache'
   📊 Data: {
  "term": "dull ache",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:03.258550] 🔄 NEO4J_SEMANTIC_SEARCH_QUERY
   📋 No contains match found, trying semantic search for 'dull ache'
   📊 Data: {
  "term": "dull ache",
  "query_type": "SEMANTIC"
}

[2025-06-20T23:33:05.223728] 🔄 NEO4J_SEMANTIC_SEARCH_SUCCESS
   📋 Found 5 semantic matches for 'dull ache'
   📊 Data: {
  "term": "dull ache",
  "matches_found": 5,
  "match_type": "SEMANTIC"
}

[2025-06-20T23:33:05.226461] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dull ache' → 'Dull' (SNOMED: 263744001)
   📊 Data: {
  "original_term": "dull ache",
  "snomed_concept_id": "263744001",
  "preferred_term": "Dull",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:05.226443"
}

[2025-06-20T23:33:05.229667] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dull ache' → 'Sachet' (SNOMED: 426148002)
   📊 Data: {
  "original_term": "dull ache",
  "snomed_concept_id": "426148002",
  "preferred_term": "Sachet",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:05.229656"
}

[2025-06-20T23:33:05.232210] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dull ache' → 'Cachet' (SNOMED: 385048003)
   📊 Data: {
  "original_term": "dull ache",
  "snomed_concept_id": "385048003",
  "preferred_term": "Cachet",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:05.232201"
}

[2025-06-20T23:33:05.233062] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dull ache' → 'cachet' (SNOMED: 385048003)
   📊 Data: {
  "original_term": "dull ache",
  "snomed_concept_id": "385048003",
  "preferred_term": "cachet",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "fr",
  "timestamp": "2025-06-20T23:33:05.233060"
}

[2025-06-20T23:33:05.234373] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dull ache' → 'cachet' (SNOMED: 732987003)
   📊 Data: {
  "original_term": "dull ache",
  "snomed_concept_id": "732987003",
  "preferred_term": "cachet",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "fr",
  "timestamp": "2025-06-20T23:33:05.234367"
}

[2025-06-20T23:33:05.236203] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'shortness of breath' (3/26)
   📊 Data: {
  "term": "shortness of breath",
  "term_index": 3,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:05.237039] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'shortness of breath' in Neo4j SNOMED
   📊 Data: {
  "term": "shortness of breath",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:06.066620] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'shortness of breath'
   📊 Data: {
  "term": "shortness of breath",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:06.070369] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'shortness of breath' → 'Shortness of breath' (SNOMED: 267036007)
   📊 Data: {
  "original_term": "shortness of breath",
  "snomed_concept_id": "267036007",
  "preferred_term": "Shortness of breath",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:06.070349"
}

[2025-06-20T23:33:06.072647] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'dizziness' (4/26)
   📊 Data: {
  "term": "dizziness",
  "term_index": 4,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:06.073614] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'dizziness' in Neo4j SNOMED
   📊 Data: {
  "term": "dizziness",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:07.149865] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'dizziness'
   📊 Data: {
  "term": "dizziness",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:07.153063] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'dizziness' → 'Dizziness' (SNOMED: 404640003)
   📊 Data: {
  "original_term": "dizziness",
  "snomed_concept_id": "404640003",
  "preferred_term": "Dizziness",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:07.153049"
}

[2025-06-20T23:33:07.155630] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'palpitations' (5/26)
   📊 Data: {
  "term": "palpitations",
  "term_index": 5,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:07.156581] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'palpitations' in Neo4j SNOMED
   📊 Data: {
  "term": "palpitations",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:07.529835] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'palpitations'
   📊 Data: {
  "term": "palpitations",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:07.530504] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'palpitations' → 'palpitations' (SNOMED: 80313002)
   📊 Data: {
  "original_term": "palpitations",
  "snomed_concept_id": "80313002",
  "preferred_term": "palpitations",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "fr",
  "timestamp": "2025-06-20T23:33:07.530500"
}

[2025-06-20T23:33:07.531191] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'swollen ankles' (6/26)
   📊 Data: {
  "term": "swollen ankles",
  "term_index": 6,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:07.531516] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'swollen ankles' in Neo4j SNOMED
   📊 Data: {
  "term": "swollen ankles",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:09.434575] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'swollen ankles'
   📊 Data: {
  "term": "swollen ankles",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:11.141943] 🔄 NEO4J_SEMANTIC_SEARCH_QUERY
   📋 No contains match found, trying semantic search for 'swollen ankles'
   📊 Data: {
  "term": "swollen ankles",
  "query_type": "SEMANTIC"
}

[2025-06-20T23:33:13.140673] 🔄 NEO4J_SEMANTIC_SEARCH_SUCCESS
   📋 Found 5 semantic matches for 'swollen ankles'
   📊 Data: {
  "term": "swollen ankles",
  "matches_found": 5,
  "match_type": "SEMANTIC"
}

[2025-06-20T23:33:13.145486] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'swollen ankles' → 'Not swollen' (SNOMED: 300890009)
   📊 Data: {
  "original_term": "swollen ankles",
  "snomed_concept_id": "300890009",
  "preferred_term": "Not swollen",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.145466"
}

[2025-06-20T23:33:13.147799] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'swollen ankles' → 'Swollen toe' (SNOMED: 277890004)
   📊 Data: {
  "original_term": "swollen ankles",
  "snomed_concept_id": "277890004",
  "preferred_term": "Swollen toe",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.147790"
}

[2025-06-20T23:33:13.149597] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'swollen ankles' → 'Both ankles' (SNOMED: 69948000)
   📊 Data: {
  "original_term": "swollen ankles",
  "snomed_concept_id": "69948000",
  "preferred_term": "Both ankles",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.149591"
}

[2025-06-20T23:33:13.151158] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'swollen ankles' → 'Swollen vein' (SNOMED: 248495005)
   📊 Data: {
  "original_term": "swollen ankles",
  "snomed_concept_id": "248495005",
  "preferred_term": "Swollen vein",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.151153"
}

[2025-06-20T23:33:13.153222] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'swollen ankles' → 'Swollen nose' (SNOMED: 162383006)
   📊 Data: {
  "original_term": "swollen ankles",
  "snomed_concept_id": "162383006",
  "preferred_term": "Swollen nose",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.153212"
}

[2025-06-20T23:33:13.154961] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'hypertension' (7/26)
   📊 Data: {
  "term": "hypertension",
  "term_index": 7,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:13.155831] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'hypertension' in Neo4j SNOMED
   📊 Data: {
  "term": "hypertension",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:13.374530] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'hypertension'
   📊 Data: {
  "term": "hypertension",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:13.375244] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'hypertension' → 'Hypertension' (SNOMED: 38341003)
   📊 Data: {
  "original_term": "hypertension",
  "snomed_concept_id": "38341003",
  "preferred_term": "Hypertension",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:13.375240"
}

[2025-06-20T23:33:13.376254] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'Lisinopril' (8/26)
   📊 Data: {
  "term": "Lisinopril",
  "term_index": 8,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:13.376777] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'Lisinopril' in Neo4j SNOMED
   📊 Data: {
  "term": "Lisinopril",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:14.473910] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'Lisinopril'
   📊 Data: {
  "term": "Lisinopril",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:14.474811] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'Lisinopril' → 'Lisinopril' (SNOMED: 386873009)
   📊 Data: {
  "original_term": "Lisinopril",
  "snomed_concept_id": "386873009",
  "preferred_term": "Lisinopril",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:14.474806"
}

[2025-06-20T23:33:14.475781] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'high cholesterol' (9/26)
   📊 Data: {
  "term": "high cholesterol",
  "term_index": 9,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:14.476269] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'high cholesterol' in Neo4j SNOMED
   📊 Data: {
  "term": "high cholesterol",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:14.560191] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'high cholesterol'
   📊 Data: {
  "term": "high cholesterol",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:14.560962] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'high cholesterol' → 'High cholesterol' (SNOMED: 13644009)
   📊 Data: {
  "original_term": "high cholesterol",
  "snomed_concept_id": "13644009",
  "preferred_term": "High cholesterol",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:14.560958"
}

[2025-06-20T23:33:14.562193] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'smoker' (10/26)
   📊 Data: {
  "term": "smoker",
  "term_index": 10,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:14.562807] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'smoker' in Neo4j SNOMED
   📊 Data: {
  "term": "smoker",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:14.905479] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'smoker'
   📊 Data: {
  "term": "smoker",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:14.906262] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'smoker' → 'Smoker' (SNOMED: 77176002)
   📊 Data: {
  "original_term": "smoker",
  "snomed_concept_id": "77176002",
  "preferred_term": "Smoker",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:14.906259"
}

[2025-06-20T23:33:14.907240] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'heart murmur' (11/26)
   📊 Data: {
  "term": "heart murmur",
  "term_index": 11,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:14.907891] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'heart murmur' in Neo4j SNOMED
   📊 Data: {
  "term": "heart murmur",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:15.292846] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'heart murmur'
   📊 Data: {
  "term": "heart murmur",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:15.294139] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'heart murmur' → 'Heart murmur' (SNOMED: 88610006)
   📊 Data: {
  "original_term": "heart murmur",
  "snomed_concept_id": "88610006",
  "preferred_term": "Heart murmur",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:15.294132"
}

[2025-06-20T23:33:15.295732] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'blood pressure' (12/26)
   📊 Data: {
  "term": "blood pressure",
  "term_index": 12,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:15.296672] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'blood pressure' in Neo4j SNOMED
   📊 Data: {
  "term": "blood pressure",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:15.619606] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'blood pressure'
   📊 Data: {
  "term": "blood pressure",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:15.620424] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood pressure' → 'Blood pressure' (SNOMED: 75367002)
   📊 Data: {
  "original_term": "blood pressure",
  "snomed_concept_id": "75367002",
  "preferred_term": "Blood pressure",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:15.620421"
}

[2025-06-20T23:33:15.622779] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term '145/90 mmHg' (13/26)
   📊 Data: {
  "term": "145/90 mmHg",
  "term_index": 13,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:15.623984] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term '145/90 mmHg' in Neo4j SNOMED
   📊 Data: {
  "term": "145/90 mmHg",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:17.368148] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for '145/90 mmHg'
   📊 Data: {
  "term": "145/90 mmHg",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:19.186099] 🔄 NEO4J_SEMANTIC_SEARCH_QUERY
   📋 No contains match found, trying semantic search for '145/90 mmHg'
   📊 Data: {
  "term": "145/90 mmHg",
  "query_type": "SEMANTIC"
}

[2025-06-20T23:33:21.151933] 🔄 NEO4J_SEMANTIC_SEARCH_SUCCESS
   📋 Found 5 semantic matches for '145/90 mmHg'
   📊 Data: {
  "term": "145/90 mmHg",
  "matches_found": 5,
  "match_type": "SEMANTIC"
}

[2025-06-20T23:33:21.155165] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped '145/90 mmHg' → 'mmHg' (SNOMED: 259018001)
   📊 Data: {
  "original_term": "145/90 mmHg",
  "snomed_concept_id": "259018001",
  "preferred_term": "mmHg",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.155148"
}

[2025-06-20T23:33:21.158744] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped '145/90 mmHg' → 'mmHg/L/s' (SNOMED: 259076006)
   📊 Data: {
  "original_term": "145/90 mmHg",
  "snomed_concept_id": "259076006",
  "preferred_term": "mmHg/L/s",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.158737"
}

[2025-06-20T23:33:21.160956] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped '145/90 mmHg' → 'mmHg/mL/s' (SNOMED: 259077002)
   📊 Data: {
  "original_term": "145/90 mmHg",
  "snomed_concept_id": "259077002",
  "preferred_term": "mmHg/mL/s",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.160953"
}

[2025-06-20T23:33:21.162408] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped '145/90 mmHg' → 'mmHg/sq. m' (SNOMED: 259078007)
   📊 Data: {
  "original_term": "145/90 mmHg",
  "snomed_concept_id": "259078007",
  "preferred_term": "mmHg/sq. m",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.162403"
}

[2025-06-20T23:33:21.163964] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped '145/90 mmHg' → 'mmHg.mL.beats/min' (SNOMED: 264864008)
   📊 Data: {
  "original_term": "145/90 mmHg",
  "snomed_concept_id": "264864008",
  "preferred_term": "mmHg.mL.beats/min",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.163959"
}

[2025-06-20T23:33:21.165370] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'pitting edema' (14/26)
   📊 Data: {
  "term": "pitting edema",
  "term_index": 14,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:21.166159] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'pitting edema' in Neo4j SNOMED
   📊 Data: {
  "term": "pitting edema",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:21.204134] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'pitting edema'
   📊 Data: {
  "term": "pitting edema",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:21.205627] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'pitting edema' → 'Pitting edema' (SNOMED: 5008001)
   📊 Data: {
  "original_term": "pitting edema",
  "snomed_concept_id": "5008001",
  "preferred_term": "Pitting edema",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:21.205620"
}

[2025-06-20T23:33:21.208443] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'cardiac issue' (15/26)
   📊 Data: {
  "term": "cardiac issue",
  "term_index": 15,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:21.209186] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'cardiac issue' in Neo4j SNOMED
   📊 Data: {
  "term": "cardiac issue",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:22.899226] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'cardiac issue'
   📊 Data: {
  "term": "cardiac issue",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:24.897587] 🔄 NEO4J_SEMANTIC_SEARCH_QUERY
   📋 No contains match found, trying semantic search for 'cardiac issue'
   📊 Data: {
  "term": "cardiac issue",
  "query_type": "SEMANTIC"
}

[2025-06-20T23:33:26.912248] 🔄 NEO4J_SEMANTIC_SEARCH_SUCCESS
   📋 Found 5 semantic matches for 'cardiac issue'
   📊 Data: {
  "term": "cardiac issue",
  "matches_found": 5,
  "match_type": "SEMANTIC"
}

[2025-06-20T23:33:26.916914] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiac issue' → 'Tissue' (SNOMED: 85756007)
   📊 Data: {
  "original_term": "cardiac issue",
  "snomed_concept_id": "85756007",
  "preferred_term": "Tissue",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:26.916898"
}

[2025-06-20T23:33:26.921047] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiac issue' → 'Cardiac CT' (SNOMED: 241547009)
   📊 Data: {
  "original_term": "cardiac issue",
  "snomed_concept_id": "241547009",
  "preferred_term": "Cardiac CT",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:26.921036"
}

[2025-06-20T23:33:26.923286] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiac issue' → 'Acardiacus' (SNOMED: 84648007)
   📊 Data: {
  "original_term": "cardiac issue",
  "snomed_concept_id": "84648007",
  "preferred_term": "Acardiacus",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:26.923281"
}

[2025-06-20T23:33:26.925580] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiac issue' → 'Scar tissue' (SNOMED: 12402003)
   📊 Data: {
  "original_term": "cardiac issue",
  "snomed_concept_id": "12402003",
  "preferred_term": "Scar tissue",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:26.925578"
}

[2025-06-20T23:33:26.927075] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiac issue' → 'Bony tissue' (SNOMED: 3138006)
   📊 Data: {
  "original_term": "cardiac issue",
  "snomed_concept_id": "3138006",
  "preferred_term": "Bony tissue",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:26.927073"
}

[2025-06-20T23:33:26.928578] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'coronary artery disease' (16/26)
   📊 Data: {
  "term": "coronary artery disease",
  "term_index": 16,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:26.929325] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'coronary artery disease' in Neo4j SNOMED
   📊 Data: {
  "term": "coronary artery disease",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:27.206312] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'coronary artery disease'
   📊 Data: {
  "term": "coronary artery disease",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:27.208051] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'coronary artery disease' → 'Coronary artery disease' (SNOMED: 53741008)
   📊 Data: {
  "original_term": "coronary artery disease",
  "snomed_concept_id": "53741008",
  "preferred_term": "Coronary artery disease",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:27.208048"
}

[2025-06-20T23:33:27.210648] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'heart failure' (17/26)
   📊 Data: {
  "term": "heart failure",
  "term_index": 17,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:27.211812] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'heart failure' in Neo4j SNOMED
   📊 Data: {
  "term": "heart failure",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:27.545685] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'heart failure'
   📊 Data: {
  "term": "heart failure",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:27.548156] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'heart failure' → 'Heart failure' (SNOMED: 84114007)
   📊 Data: {
  "original_term": "heart failure",
  "snomed_concept_id": "84114007",
  "preferred_term": "Heart failure",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:27.548142"
}

[2025-06-20T23:33:27.550690] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'EKG' (18/26)
   📊 Data: {
  "term": "EKG",
  "term_index": 18,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:27.552447] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'EKG' in Neo4j SNOMED
   📊 Data: {
  "term": "EKG",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:29.257904] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'EKG'
   📊 Data: {
  "term": "EKG",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:31.038283] 🔄 NEO4J_CONTAINS_SEARCH_SUCCESS
   📋 Found 3 contains matches for 'EKG'
   📊 Data: {
  "term": "EKG",
  "matches_found": 3,
  "match_type": "CONTAINS"
}

[2025-06-20T23:33:31.039434] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'EKG' → 'EKG finding' (SNOMED: 301120008)
   📊 Data: {
  "original_term": "EKG",
  "snomed_concept_id": "301120008",
  "preferred_term": "EKG finding",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:31.039428"
}

[2025-06-20T23:33:31.041711] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'EKG' → 'EKG: asystole' (SNOMED: 427485008)
   📊 Data: {
  "original_term": "EKG",
  "snomed_concept_id": "427485008",
  "preferred_term": "EKG: asystole",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:31.041708"
}

[2025-06-20T23:33:31.043631] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'EKG' → 'EKG hypertrophy' (SNOMED: 1155004)
   📊 Data: {
  "original_term": "EKG",
  "snomed_concept_id": "1155004",
  "preferred_term": "EKG hypertrophy",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:31.043629"
}

[2025-06-20T23:33:31.046020] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'blood work' (19/26)
   📊 Data: {
  "term": "blood work",
  "term_index": 19,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:31.047223] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'blood work' in Neo4j SNOMED
   📊 Data: {
  "term": "blood work",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:32.861710] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'blood work'
   📊 Data: {
  "term": "blood work",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:34.627800] 🔄 NEO4J_SEMANTIC_SEARCH_QUERY
   📋 No contains match found, trying semantic search for 'blood work'
   📊 Data: {
  "term": "blood work",
  "query_type": "SEMANTIC"
}

[2025-06-20T23:33:36.536765] 🔄 NEO4J_SEMANTIC_SEARCH_SUCCESS
   📋 Found 5 semantic matches for 'blood work'
   📊 Data: {
  "term": "blood work",
  "matches_found": 5,
  "match_type": "SEMANTIC"
}

[2025-06-20T23:33:36.541360] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood work' → 'Blood' (SNOMED: 87612001)
   📊 Data: {
  "original_term": "blood work",
  "snomed_concept_id": "87612001",
  "preferred_term": "Blood",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.541346"
}

[2025-06-20T23:33:36.546175] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood work' → 'Worker' (SNOMED: 106541005)
   📊 Data: {
  "original_term": "blood work",
  "snomed_concept_id": "106541005",
  "preferred_term": "Worker",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.546171"
}

[2025-06-20T23:33:36.549171] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood work' → 'Working' (SNOMED: 261041009)
   📊 Data: {
  "original_term": "blood work",
  "snomed_concept_id": "261041009",
  "preferred_term": "Working",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.549160"
}

[2025-06-20T23:33:36.553194] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood work' → 'In work' (SNOMED: 224363007)
   📊 Data: {
  "original_term": "blood work",
  "snomed_concept_id": "224363007",
  "preferred_term": "In work",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.553187"
}

[2025-06-20T23:33:36.556107] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'blood work' → 'Overwork' (SNOMED: 105490003)
   📊 Data: {
  "original_term": "blood work",
  "snomed_concept_id": "105490003",
  "preferred_term": "Overwork",
  "match_type": "semantic",
  "confidence": 0.65,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.556101"
}

[2025-06-20T23:33:36.559607] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'lipid panel' (20/26)
   📊 Data: {
  "term": "lipid panel",
  "term_index": 20,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:36.560879] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'lipid panel' in Neo4j SNOMED
   📊 Data: {
  "term": "lipid panel",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:36.663800] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'lipid panel'
   📊 Data: {
  "term": "lipid panel",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:36.667427] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'lipid panel' → 'Lipid panel' (SNOMED: 16254007)
   📊 Data: {
  "original_term": "lipid panel",
  "snomed_concept_id": "16254007",
  "preferred_term": "Lipid panel",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:36.667415"
}

[2025-06-20T23:33:36.671230] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'BNP' (21/26)
   📊 Data: {
  "term": "BNP",
  "term_index": 21,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:36.673463] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'BNP' in Neo4j SNOMED
   📊 Data: {
  "term": "BNP",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:38.432190] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'BNP'
   📊 Data: {
  "term": "BNP",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:40.264075] 🔄 NEO4J_CONTAINS_SEARCH_SUCCESS
   📋 Found 3 contains matches for 'BNP'
   📊 Data: {
  "term": "BNP",
  "matches_found": 3,
  "match_type": "CONTAINS"
}

[2025-06-20T23:33:40.265694] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'BNP' → 'proBNP - pro-B-type natriuretic peptide' (SNOMED: 407060002)
   📊 Data: {
  "original_term": "BNP",
  "snomed_concept_id": "407060002",
  "preferred_term": "proBNP - pro-B-type natriuretic peptide",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:40.265689"
}

[2025-06-20T23:33:40.267822] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'BNP' → 'N-BNP - N-terminal pro brain natriuretic peptide' (SNOMED: 414798009)
   📊 Data: {
  "original_term": "BNP",
  "snomed_concept_id": "414798009",
  "preferred_term": "N-BNP - N-terminal pro brain natriuretic peptide",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:40.267819"
}

[2025-06-20T23:33:40.270736] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'BNP' → 'NT-proBNP - N-terminal pro-B-type natriuretic peptide' (SNOMED: 414798009)
   📊 Data: {
  "original_term": "BNP",
  "snomed_concept_id": "414798009",
  "preferred_term": "NT-proBNP - N-terminal pro-B-type natriuretic peptide",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:40.270730"
}

[2025-06-20T23:33:40.273429] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'cardiologist' (22/26)
   📊 Data: {
  "term": "cardiologist",
  "term_index": 22,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:40.274514] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'cardiologist' in Neo4j SNOMED
   📊 Data: {
  "term": "cardiologist",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:40.391284] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'cardiologist'
   📊 Data: {
  "term": "cardiologist",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:40.392746] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'cardiologist' → 'Cardiologist' (SNOMED: 17561000)
   📊 Data: {
  "original_term": "cardiologist",
  "snomed_concept_id": "17561000",
  "preferred_term": "Cardiologist",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:40.392741"
}

[2025-06-20T23:33:40.395268] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'stress test' (23/26)
   📊 Data: {
  "term": "stress test",
  "term_index": 23,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:40.396474] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'stress test' in Neo4j SNOMED
   📊 Data: {
  "term": "stress test",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:42.110954] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'stress test'
   📊 Data: {
  "term": "stress test",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:43.970463] 🔄 NEO4J_CONTAINS_SEARCH_SUCCESS
   📋 Found 3 contains matches for 'stress test'
   📊 Data: {
  "term": "stress test",
  "matches_found": 3,
  "match_type": "CONTAINS"
}

[2025-06-20T23:33:43.971815] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'stress test' → 'Nonstress test' (SNOMED: 387673001)
   📊 Data: {
  "original_term": "stress test",
  "snomed_concept_id": "387673001",
  "preferred_term": "Nonstress test",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:43.971812"
}

[2025-06-20T23:33:43.973927] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'stress test' → 'Photostress test' (SNOMED: 252813005)
   📊 Data: {
  "original_term": "stress test",
  "snomed_concept_id": "252813005",
  "preferred_term": "Photostress test",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:43.973922"
}

[2025-06-20T23:33:43.976112] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'stress test' → 'Stress test table' (SNOMED: 465498004)
   📊 Data: {
  "original_term": "stress test",
  "snomed_concept_id": "465498004",
  "preferred_term": "Stress test table",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:43.976109"
}

[2025-06-20T23:33:43.978406] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'diuretic' (24/26)
   📊 Data: {
  "term": "diuretic",
  "term_index": 24,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:43.979477] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'diuretic' in Neo4j SNOMED
   📊 Data: {
  "term": "diuretic",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:45.030579] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'diuretic'
   📊 Data: {
  "term": "diuretic",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:45.032384] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'diuretic' → 'Diuretic' (SNOMED: 372695000)
   📊 Data: {
  "original_term": "diuretic",
  "snomed_concept_id": "372695000",
  "preferred_term": "Diuretic",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:45.032378"
}

[2025-06-20T23:33:45.036424] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'hydrochlorothiazide' (25/26)
   📊 Data: {
  "term": "hydrochlorothiazide",
  "term_index": 25,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:45.038361] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'hydrochlorothiazide' in Neo4j SNOMED
   📊 Data: {
  "term": "hydrochlorothiazide",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:46.334361] 🔄 NEO4J_EXACT_MATCH_SUCCESS
   📋 Found 1 exact matches for 'hydrochlorothiazide'
   📊 Data: {
  "term": "hydrochlorothiazide",
  "matches_found": 1,
  "match_type": "EXACT"
}

[2025-06-20T23:33:46.339578] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'hydrochlorothiazide' → 'Hydrochlorothiazide' (SNOMED: 387525002)
   📊 Data: {
  "original_term": "hydrochlorothiazide",
  "snomed_concept_id": "387525002",
  "preferred_term": "Hydrochlorothiazide",
  "match_type": "exact",
  "confidence": 0.95,
  "language": "en",
  "timestamp": "2025-06-20T23:33:46.339565"
}

[2025-06-20T23:33:46.345924] 🔄 NEO4J_TERM_QUERY_START
   📋 Querying Neo4j for term 'smoking cessation' (26/26)
   📊 Data: {
  "term": "smoking cessation",
  "term_index": 26,
  "total_terms": 26,
  "language": "en"
}

[2025-06-20T23:33:46.347737] 🔄 NEO4J_EXACT_MATCH_QUERY
   📋 Trying exact match for term 'smoking cessation' in Neo4j SNOMED
   📊 Data: {
  "term": "smoking cessation",
  "query_type": "EXACT_MATCH"
}

[2025-06-20T23:33:48.200636] 🔄 NEO4J_CONTAINS_SEARCH_QUERY
   📋 No exact match found, trying contains search for 'smoking cessation'
   📊 Data: {
  "term": "smoking cessation",
  "query_type": "CONTAINS",
  "language": "en"
}

[2025-06-20T23:33:50.033231] 🔄 NEO4J_CONTAINS_SEARCH_SUCCESS
   📋 Found 3 contains matches for 'smoking cessation'
   📊 Data: {
  "term": "smoking cessation",
  "matches_found": 3,
  "match_type": "CONTAINS"
}

[2025-06-20T23:33:50.040717] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'smoking cessation' → 'Age at smoking cessation' (SNOMED: 1221000175102)
   📊 Data: {
  "original_term": "smoking cessation",
  "snomed_concept_id": "1221000175102",
  "preferred_term": "Age at smoking cessation",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:50.040699"
}

[2025-06-20T23:33:50.045127] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'smoking cessation' → 'Smoking cessation advice' (SNOMED: 225323000)
   📊 Data: {
  "original_term": "smoking cessation",
  "snomed_concept_id": "225323000",
  "preferred_term": "Smoking cessation advice",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:50.045123"
}

[2025-06-20T23:33:50.049875] 🔄 NEO4J_SNOMED_MAPPING
   📋 Mapped 'smoking cessation' → 'Smoking cessation therapy' (SNOMED: 710081004)
   📊 Data: {
  "original_term": "smoking cessation",
  "snomed_concept_id": "710081004",
  "preferred_term": "Smoking cessation therapy",
  "match_type": "contains",
  "confidence": 0.8,
  "language": "en",
  "timestamp": "2025-06-20T23:33:50.049870"
}

[2025-06-20T23:33:50.054249] 🔄 NEO4J_SNOMED_MAPPING_COMPLETED
   📋 SNOMED mapping completed: 54 mappings found
   📊 Data: {
  "total_mappings_found": 54,
  "terms_processed": 26,
  "success_rate": 2.076923076923077,
  "database": "NEO4J_SNOMED_CANADIAN_EDITION"
}

[2025-06-20T23:33:50.056814] ✅ [INFO] Retrieved 54 SNOMED codes for the entire encounter.
[2025-06-20T23:33:50.058987] ✅ [INFO] No specific preferences found for doctor doc_123.
[2025-06-20T23:33:50.061006] ✅ [INFO] Starting generation for section 1/7: 'Subjective'
[2025-06-20T23:33:50.958375] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Subjective'.
[2025-06-20T23:33:59.328256] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Subjective section (ID: section_86d1bec2) - 1181 chars, 5 line refs
   📊 Data: {
  "section_id": "section_86d1bec2",
  "section_type": "Subjective",
  "content_length": 1181,
  "line_references_found": 5,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.9,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:33:59.328239"
}

[2025-06-20T23:33:59.334305] ✅ [INFO] ✅ Successfully generated and saved section 'Subjective' on attempt 1.
[2025-06-20T23:33:59.336046] ✅ [INFO] Starting generation for section 2/7: 'Objective'
[2025-06-20T23:34:00.078504] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Objective'.
[2025-06-20T23:34:07.099237] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Objective section (ID: section_fd05b799) - 589 chars, 2 line refs
   📊 Data: {
  "section_id": "section_fd05b799",
  "section_type": "Objective",
  "content_length": 589,
  "line_references_found": 2,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.9,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:34:07.099215"
}

[2025-06-20T23:34:07.108090] ✅ [INFO] ✅ Successfully generated and saved section 'Objective' on attempt 1.
[2025-06-20T23:34:07.112420] ✅ [INFO] Starting generation for section 3/7: 'Assessment'
[2025-06-20T23:34:07.737066] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Assessment'.
[2025-06-20T23:34:19.798794] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Assessment section (ID: section_0d7bcf2c) - 1073 chars, 7 line refs
   📊 Data: {
  "section_id": "section_0d7bcf2c",
  "section_type": "Assessment",
  "content_length": 1073,
  "line_references_found": 7,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.8,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:34:19.798770"
}

[2025-06-20T23:34:19.807338] ✅ [INFO] ✅ Successfully generated and saved section 'Assessment' on attempt 1.
[2025-06-20T23:34:19.811773] ✅ [INFO] Starting generation for section 4/7: 'Plan'
[2025-06-20T23:34:20.593006] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Plan'.
[2025-06-20T23:35:01.287792] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Plan section (ID: section_07a65982) - 890 chars, 1 line refs
   📊 Data: {
  "section_id": "section_07a65982",
  "section_type": "Plan",
  "content_length": 890,
  "line_references_found": 1,
  "snomed_mappings_applied": 54,
  "confidence_score": 1.0,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:35:01.287773"
}

[2025-06-20T23:35:01.295243] ✅ [INFO] ✅ Successfully generated and saved section 'Plan' on attempt 1.
[2025-06-20T23:35:01.298270] ✅ [INFO] Starting generation for section 5/7: 'Patient_Summary'
[2025-06-20T23:35:01.781240] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Patient_Summary'.
[2025-06-20T23:35:10.527789] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Patient_Summary section (ID: section_bed31629) - 973 chars, 5 line refs
   📊 Data: {
  "section_id": "section_bed31629",
  "section_type": "Patient_Summary",
  "content_length": 973,
  "line_references_found": 5,
  "snomed_mappings_applied": 54,
  "confidence_score": 1.0,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:35:10.527764"
}

[2025-06-20T23:35:10.535895] ✅ [INFO] ✅ Successfully generated and saved section 'Patient_Summary' on attempt 1.
[2025-06-20T23:35:10.539820] ✅ [INFO] Starting generation for section 6/7: 'Referral_Note'
[2025-06-20T23:35:11.142046] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Referral_Note'.
[2025-06-20T23:35:22.130792] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Referral_Note section (ID: section_627b3abb) - 3855 chars, 0 line refs
   📊 Data: {
  "section_id": "section_627b3abb",
  "section_type": "Referral_Note",
  "content_length": 3855,
  "line_references_found": 0,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.9,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:35:22.130769"
}

[2025-06-20T23:35:22.138355] ❌ [ERROR] ❌ Generation resulted in an error for section 'Referral_Note'.
   Details: {
  "error_content": "Error: Failed to parse LLM response. Raw output: {\n  \"noteContent\": \"### Referral Note\\n\\n**Referral To:** Cardiologist\\n\\n**Reason for Referral:**\\nMr. Smith is being referred for a comprehensive cardiac evaluation due to persistent chest pain, shortness of breath, palpitations, and swollen ankles. The chest pain is described as a dull ache on the left side, exacerbated by physical activity, and has been ongoing for approximately two months (Line 2, 3). The patient also reports shortness of breath accompanying the chest pain and palpitations, described as his heart \"racing\" at times (Line 4, 5). Additionally, there is significant swelling in his ankles, particularly noticeable at the end of the day (Line 5).\n\n**Pertinent History and Findings:**\n- **Hypertension:** Managed with Lisinopril 10mg daily for the past year (Line 6).\n- **High Cholesterol:** History of high cholesterol, currently not on medication (Line 6).\n- **Vital Signs:** Blood pressure recorded at 145/90 mmHg (Line 19).\n- **Physical Examination:** Faint heart murmur detected, lungs clear, 2+ pitting edema in both ankles (Line 19).\n\n**Questions for the Consultant:**\n1. Could the patient's symptoms be indicative of coronary artery disease or heart failure? (Line 2, 3, 4, 5, 19)\n2. Is there a need for further cardiac evaluation, including a stress test, to rule out coronary artery disease and heart failure? (Line 21)\n3. What are the potential causes of the patient's palpitations and swollen ankles, and what management strategies would you recommend? (Line 4, 5)\n4. Are there any additional diagnostic tests or treatments you would recommend for this patient, considering his history of hypertension and high cholesterol? (Line 6, 21)\n5. What are the potential implications of the detected heart murmur, and what further investigations or interventions are necessary? (Line 19)\n\n**Follow-up:**\nThe patient has been referred to a cardiologist for a full evaluation, including a stress test, to further investigate the potential cardiac issues (Line 21). A follow-up appointment is scheduled in two weeks to review test results and discuss smoking cessation (Line 21).\n\",\n  \"lineReferences\": [\n    {\n      \"line_number\": 2,\n      \"text\": \"I'm still having that chest pain we talked about. It's a dull ache, mostly on the left side, exacerbated by physical activity such as walking up stairs. The pain has been ongoing for approximately two months.\",\n      \"start_char\": 28,\n      \"end_char\": 143\n    },\n    {\n      \"line_number\": 3,\n      \"text\": \"It's a dull ache, mostly on the left side, exacerbated by physical activity such as walking up stairs. The pain has been ongoing for approximately two months.\",\n      \"start_char\": 0,\n      \"end_char\": 108\n    },\n    {\n      \"line_number\": 4,\n      \"text\": \"Yes, I do get a bit short of breath. No dizziness, but my heart feels like it's racing sometimes.\",\n      \"start_char\": 0,\n      \"end_char\": 93\n    },\n    {\n      \"line_number\": 5,\n      \"text\": \"Also, my ankles have been really swollen, especially at the end of the day.\",\n      \"start_char\": 0,\n      \"end_char\": 66\n    },\n    {\n      \"line_number\": 6,\n      \"text\": \"That's right. I've been taking it for about a year. I also have a history of high cholesterol, but I'm not on any medication for that.\",\n      \"start_char\": 0,\n      \"end_char\": 105\n    },\n    {\n      \"line_number\": 19,\n      \"text\": \"Okay, your heart has a regular rate and rhythm, but I do hear a faint murmur. Your lungs sound clear. I also see 2+ pitting edema in both of your ankles.\",\n      \"start_char\": 0,\n      \"end_char\": 144\n    },\n    {\n      \"line_number\": 21,\n      \"text\": \"I'm also going to refer you to a cardiologist for a full evaluation, including a stress test, to rule out coronary artery disease and heart failure.\",\n      \"start_char\": 0,\n      \"end_char\": 125\n    }\n  ]\n}"
}
[2025-06-20T23:35:22.847558] 🐞 [DEBUG] Attempt 2: Retrieved 5 chunks for 'Referral_Note'.
[2025-06-20T23:36:06.713785] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Referral_Note section (ID: section_4abc50fc) - 1726 chars, 7 line refs
   📊 Data: {
  "section_id": "section_4abc50fc",
  "section_type": "Referral_Note",
  "content_length": 1726,
  "line_references_found": 7,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.8,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:36:06.713773"
}

[2025-06-20T23:36:06.719742] ✅ [INFO] ✅ Successfully generated and saved section 'Referral_Note' on attempt 2.
[2025-06-20T23:36:06.723253] ✅ [INFO] Starting generation for section 7/7: 'Billing_Codes'
[2025-06-20T23:36:07.243896] 🐞 [DEBUG] Attempt 1: Retrieved 5 chunks for 'Billing_Codes'.
[2025-06-20T23:36:23.110480] 🔄 SECTION_GENERATION_COMPLETED
   📋 Generated Billing_Codes section (ID: section_1f7d6e31) - 751 chars, 8 line refs
   📊 Data: {
  "section_id": "section_1f7d6e31",
  "section_type": "Billing_Codes",
  "content_length": 751,
  "line_references_found": 8,
  "snomed_mappings_applied": 54,
  "confidence_score": 0.9,
  "processing_duration": 0,
  "status": "COMPLETED",
  "timestamp": "2025-06-20T23:36:23.110465"
}

[2025-06-20T23:36:23.116602] ✅ [INFO] ✅ Successfully generated and saved section 'Billing_Codes' on attempt 1.
[2025-06-20T23:36:23.119567] ✅ [INFO] ✅ Encounter processing pipeline completed successfully.
