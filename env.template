# NoteGen AI APIs - Environment Configuration Template
# Copy this file to .env and update with your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=NoteGen AI APIs
APP_VERSION=0.1.0
DEBUG=false
LOG_LEVEL=INFO
ENVIRONMENT=development

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1

# =============================================================================
# AZURE OPENAI CONFIGURATION
# =============================================================================
# Primary Azure OpenAI instance for chat/generation
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_ENDPOINT=https://your-instance.openai.azure.com
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_INSTANCE_NAME=your-instance-name
AZURE_OPENAI_API_VERSION=2024-05-01-preview
AZURE_OPENAI_MODEL=gpt-4

# Azure OpenAI Embeddings Configuration
OPENAI_EMBEDDING_ENDPOINT=https://your-instance.openai.azure.com
OPENAI_EMBEDDING_API_KEY=your_embedding_api_key_here
OPENAI_EMBEDDING_DEPLOYMENT_NAME=text-embedding-ada-002
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002

# =============================================================================
# NEO4J CONFIGURATION (SNOMED RAG)
# =============================================================================
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=notegen2024
NEO4J_DATABASE=neo4j

# Connection pool settings
NEO4J_MAX_CONNECTION_LIFETIME=3600
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_ACQUISITION_TIMEOUT=60

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================
# ChromaDB Configuration (Local vector storage)
CHROMA_PERSIST_DIRECTORY=./conversation_rag_db
CHROMA_COLLECTION_NAME=medical_conversations

# Weaviate Configuration (Alternative vector database)
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=optional_weaviate_api_key
WEAVIATE_CLASS_NAME=MedicalConversation

# Vector database settings
VECTOR_DB_TYPE=chroma  # Options: chroma, weaviate
CONVERSATION_CHUNK_SIZE=1500
CONVERSATION_CHUNK_OVERLAP=150
MAX_RETRIEVAL_CHUNKS=5

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=notegen2024
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache TTL settings (in seconds)
CACHE_TTL_SHORT=300      # 5 minutes
CACHE_TTL_MEDIUM=1800    # 30 minutes
CACHE_TTL_LONG=3600      # 1 hour

# =============================================================================
# LANGFUSE CONFIGURATION (OBSERVABILITY)
# =============================================================================
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key-here
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key-here
LANGFUSE_HOST=https://us.cloud.langfuse.com
LANGFUSE_DEBUG=false
LANGFUSE_ENABLED=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Settings (for authentication with NestJS backend)
JWT_SECRET_KEY=your-super-secret-jwt-key-here-make-it-long-and-random
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# Encryption settings for sensitive data
ENCRYPTION_KEY=your-32-byte-encryption-key-here-must-be-32-chars
PATIENT_DATA_ENCRYPTION=true

# API Security
API_KEY_HEADER=X-API-Key
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:8005
CORS_ALLOW_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9000
METRICS_ENDPOINT=/metrics

# Health check settings
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=10

# Logging configuration
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_ROTATION_SIZE=10MB
LOG_RETENTION_DAYS=30

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# HuggingFace configuration (for additional models if needed)
HF_TOKEN=your_huggingface_token_here
HF_CACHE_DIR=./hf_cache

# Grafana settings
GRAFANA_USER=admin
GRAFANA_PASSWORD=notegen2024

# =============================================================================
# RAG SYSTEM CONFIGURATION
# =============================================================================
# Conversation RAG settings
CONVERSATION_RAG_ENABLED=true
CONVERSATION_RAG_SIMILARITY_THRESHOLD=0.7
CONVERSATION_RAG_MAX_RESULTS=5

# SNOMED RAG settings
SNOMED_RAG_ENABLED=true
SNOMED_RAG_LANGUAGE=en  # Options: en, fr, both
SNOMED_RAG_MAX_CODES=10
SNOMED_RAG_SIMILARITY_THRESHOLD=0.8

# Pattern Learning RAG settings
PATTERN_LEARNING_ENABLED=true
PATTERN_LEARNING_CONFIDENCE_THRESHOLD=0.8
PATTERN_LEARNING_MIN_FREQUENCY=3
PATTERN_LEARNING_STORAGE_PATH=./doctor_patterns.json

# =============================================================================
# SOAP GENERATION SETTINGS
# =============================================================================
# Generation parameters
SOAP_GENERATION_TEMPERATURE=0.1
SOAP_GENERATION_MAX_TOKENS=4000
SOAP_GENERATION_TOP_P=0.95
SOAP_GENERATION_FREQUENCY_PENALTY=0.0
SOAP_GENERATION_PRESENCE_PENALTY=0.0

# Sequential generation settings
SOAP_SEQUENTIAL_GENERATION=true
SOAP_CONTEXT_WINDOW_SIZE=8000
SOAP_MAX_RETRIES=3
SOAP_RETRY_DELAY=2

# Quality assurance
SOAP_VALIDATION_ENABLED=true
SOAP_SNOMED_VALIDATION=true
SOAP_COMPLETENESS_CHECK=true

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Development database paths
DEV_DATA_PATH=./dev_data
TEST_DATA_PATH=./test_data
BACKUP_PATH=./backups

# Performance settings
ASYNC_POOL_SIZE=10
HTTP_TIMEOUT=30
REQUEST_TIMEOUT=60

# Feature flags
FEATURE_MULTILINGUAL=true
FEATURE_REAL_TIME=false
FEATURE_BATCH_PROCESSING=true

# =============================================================================
# DOCKER SETTINGS
# =============================================================================
# Docker service credentials
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=notegen2024
REDIS_PASSWORD=notegen2024
GRAFANA_USER=admin
GRAFANA_PASSWORD=notegen2024

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================
# Audit logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
AUDIT_LOG_ENCRYPTION=true

# Data retention policies
CONVERSATION_RETENTION_DAYS=90
PATTERN_RETENTION_DAYS=365
METRICS_RETENTION_DAYS=30

# Privacy settings
ANONYMIZE_LOGS=true
MASK_PII=true
GDPR_COMPLIANCE=true 